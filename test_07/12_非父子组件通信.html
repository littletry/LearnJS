<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>非父子组件通信</title>
</head>
<body>
<!--首先创建了 一 个名为 bus 的空 Vue 实例，里面没有任何内容;然后全局定义了组件 component-a;
    最后创建 Vue 实例 app，在 app 初始化时，也就是在生命周期 mounted 钩子函数里监 听了来自 bus 的事件 on-message，
    而在组件 component-a 中，点击按钮会通过 bus 把事件 on-message 发出去，
    此时 app 就会接收到来自 bus 的事件，进而在回调里完成自己的业务逻辑。-->
<!--这种方法巧妙而轻量地实现了任何组件间的通信，包括父子、兄弟、跨级，而且 Vue 1.x 和 Vue 2.x 都适用 。-->
    <div id="app">
        {{ message }}
        <component-a></component-a>
    </div>
    <script src="../vue/vue.js"></script>
    <script>
        let bus = new Vue();
        Vue.component('component-a', {
            template: '<button @click="handleEvent">传递事件</button>',
            methods: {
                handleEvent: function () {
                    bus.$emit('on-message', '来自组件component-a的内容');
                }
            }
        });
        let app = new Vue({
            el: '#app',
            data: {
                message: ''
            },
            mounted: function () {
                let _this = this;
                //在实例初始化时，监听来自bus实例的事件
                bus.$on('on-message', function (msg) {
                    _this.message = msg;
                })
            }
        })
    </script>
</body>
</html>
